<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="EndoReg Client Website">
    <meta name="keywords" content="Endoscopy Colonoscopy Research">
    <title>EndoReg</title>
    {% load static django_bootstrap5 %}
    {% bootstrap_css %}
    {% bootstrap_javascript %}
    <link id="theme-stylesheet" rel="stylesheet" href="{% if request.theme == 'dark' %}{% static 'css/dark.css' %}{% else %}{% static 'css/light.css' %}{% endif %}">
    
    .content {
        flex: 1;
        padding-bottom: 50px; /* Adjust based on footer height */
    }
    .footer {
        background-color: #f5f5f5;
        text-align: center;
        padding: 10px 0;
        position: fixed;
        bottom: 0;
        width: 100%;
    }
    .footer-nav {
        margin-top: 10px;
    }
    .footer-link {
        margin: 0 15px;
        color: #000;
        text-decoration: none;
    }
    .footer-link:hover {
        text-decoration: underline;
    }
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <div class="container-fluid">
            <a class="navbar-brand" href="{% url 'landing_page' %}">EndoReg</a>
            <!-- Navigation code omitted for brevity -->
            <a href="#" id="dark-mode-toggle" class="nav-link">Toggle Dark Mode</a>
        </div>
    </nav>
    <div class="container mt-4 content">
        {% block content %}
        {% endblock content %}
    </div>
    <footer class="footer bg-light text-center">
        <!-- Footer content -->
    </footer>
    <script>
        document.getElementById('dark-mode-toggle').addEventListener('click', function(e) {
            e.preventDefault();
            var currentTheme = document.getElementById('theme-stylesheet').href.includes('dark.css') ? 'dark' : 'light';
            fetch("{% url 'toggle_dark_mode' %}", {
                method: 'POST',
                headers: {
                    'X-CSRFToken': '{{ csrf_token }}',
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ 'currentTheme': currentTheme }),
                credentials: 'same-origin'
            }).then(function(response) {
                if (response.ok) {
                    // Reload the page to apply the theme change.
                    location.reload();
                }
            });
        });
    </script>
</body>
</html>

